<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SkillXLogin</title>
<script src="https://cdn.tailwindcss.com?plugins=forms"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<style>
body {
    font-family: Inter, sans-serif;
    background: #101c22;
}
.glass {
    background: rgba(24,43,52,0.6);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(49,86,104,0.5);
}
.material-symbols-outlined {
    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
}
</style>
</head>
<body class="min-h-screen flex items-center justify-center text-white">
<form id="loginForm"
      action="http://localhost:8080/SkillX/LoginHandler"
      method="POST"
      class="glass w-full max-w-md p-8 rounded-xl flex flex-col gap-6">
<h1 class="text-3xl font-extrabold text-center">
    Skill<span class="text-sky-400">X</span>
</h1>

<!-- EMAIL -->
<div>
    <input
        type="email"
        id="email"
        name="email"
        placeholder="name@college.edu"
        required
        class="h-14 w-full rounded-lg bg-[#101c22]/70 border border-[#315668] px-4 focus:ring-2 focus:ring-sky-400"
    />
    <p id="emailError" class="hidden text-red-400 text-sm mt-1">
        Please use a .com /.edu /.ac.in email address
    </p>
</div>

<!-- PASSWORD -->
<div>
    <div class="relative">
        <input
            id="password"
            type="password"
            name="password"
            placeholder="••••••••"
            required
            class="h-14 w-full rounded-lg bg-[#101c22]/70 border border-[#315668] px-4 pr-12 focus:ring-2 focus:ring-sky-400"
        />
        <!-- VISIBILITY ICON -->
        <span
            id="togglePassword"
            class="material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer select-none text-gray-400 hover:text-white"
        >
            visibility
        </span>
    </div>
    <p id="passError" class="hidden text-red-400 text-sm mt-1">
        Password must be at least 8 characters and include uppercase, lowercase, and a number.
    </p>
</div>

<button
    type="submit"
    class="h-14 rounded-lg bg-sky-500 font-bold hover:brightness-110 active:scale-95 transition"
>
    Analyze My Skills
</button>
<p class="text-center text-sm text-gray-400">
    Don't have an account? 
    <a href="register.html" class="text-sky-400 hover:underline">Register here</a>
</p>
</form>

<script>
/* =========================
   PASSWORD VISIBILITY
========================= */
const passwordInput = document.getElementById("password");
const toggleIcon = document.getElementById("togglePassword");

toggleIcon.addEventListener("click", () => {
    const isHidden = passwordInput.type === "password";
    passwordInput.type = isHidden ? "text" : "password";
    toggleIcon.textContent = isHidden ? "visibility_off" : "visibility";
});

/* =========================
   FORM VALIDATION
========================= */
const loginForm = document.getElementById("loginForm");
const emailInput = document.getElementById("email");
const emailError = document.getElementById("emailError");
const passError = document.getElementById("passError");

loginForm.addEventListener("submit", function (e) {
    let isValid = true;
    
    // EMAIL VALIDATION
    const email = emailInput.value;
    const validEmail = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.(com|edu|ac\.in)$/.test(email);
    
    if (!validEmail) {
        e.preventDefault();
        isValid = false;
        emailError.classList.remove("hidden");
        emailInput.classList.add("border-red-400");
    } else {
        emailError.classList.add("hidden");
        emailInput.classList.remove("border-red-400");
    }
    
    // PASSWORD VALIDATION
    const password = passwordInput.value;
    const hasMinLength = password.length >= 8;
    const hasUpperCase = /[A-Z]/.test(password);
    const hasLowerCase = /[a-z]/.test(password);
    const hasNumber = /\d/.test(password);
    
    if (!hasMinLength || !hasUpperCase || !hasLowerCase || !hasNumber) {
        e.preventDefault();
        isValid = false;
        passError.classList.remove("hidden");
        passwordInput.classList.add("border-red-400");
    } else {
        passError.classList.add("hidden");
        passwordInput.classList.remove("border-red-400");
    }
    
    // Focus on first invalid field
    if (!isValid) {
        if (!validEmail) {
            emailInput.focus();
        } else {
            passwordInput.focus();
        }
    }
});

// Hide email error when typing
emailInput.addEventListener("input", () => {
    emailError.classList.add("hidden");
    emailInput.classList.remove("border-red-400");
});

// Hide password error when typing
passwordInput.addEventListener("input", () => {
    passError.classList.add("hidden");
    passwordInput.classList.remove("border-red-400");
});
</script>
</body>
</html>